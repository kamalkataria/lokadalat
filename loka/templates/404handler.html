{% extends "loka/base2.html" %}
{% block content %}

<script>
    var phraseArray = [];

    function randomIndex(arr) {
        return Math.floor(Math.random() * arr.length);
    }

    function completeSentence(arr, loc) {
        let index = randomIndex(arr);
        document.getElementById(loc).innerHTML = "You are " + arr[index];
    }

    $(document).ready(function () {
        $.ajax({
            url: window.location.href,  // Request the same page for JSON data
            type: "GET",
            dataType: "json",
            headers: { "X-Requested-With": "XMLHttpRequest" },  // Ensure Django recognizes it as AJAX
            success: function (data) {
                console.log("Phrases loaded:", data);
                phraseArray = data.phraseArray || [];

                if (phraseArray.length > 0) {
                    setInterval(function () {
                        completeSentence(phraseArray, 'randomAdjective');
                    }, 200);
                } else {
                    document.getElementById('randomAdjective').innerHTML = "You are amazing!";
                }
            },
            error: function (xhr, status, error) {
                console.error("Failed to load phrases.", error);
                document.getElementById('randomAdjective').innerHTML = "You are unique!";
            }
        });
    });
</script>

<div class="container" style="width:100%;height:100%;margin:10% auto;">
    <div class="row">
        <div class="col-sm-4">
            <p class="text-warning text-center" style="font-size:10em;">404</p>
        </div>

        <div class="col-sm-4">
            <h2 id="whoAreYou">
                <div onclick="completeSentence(phraseArray, 'randomAdjective')" id="randomAdjective" class="alert alert-primary">
                    Loading...
                </div>
            </h2>
        </div>

        <div class="col-sm-4"></div>
    </div>
</div>

{% endblock content %}
